<VirtualHost *:443>
        SSLEngine on
        SSLCipherSuite HIGH:!aNULL:!MD5 
        SSLProtocol all -SSLv2 -SSLv3 -TLSv1 
        SSLHonorCipherOrder on 
        SSLCompression off
        SSLCertificateFile       /etc/pki/tls/certs/localhost.crt   
        SSLCertificateKeyFile    /etc/pki/tls/private/localhost.key
    DocumentRoot /var/www/html/docroot
    ServerName {{ edit_url }}
    ServerAlias {{ edit_alias }}
    ErrorLog logs/{{ edit_url}}.gov-error_log
    CustomLog logs/{{ edit_url }}.gov-access_log common
    php_value newrelic.appname "{{ site_url }};PHP Application"
    ProxyPassMatch ^/(.*\.php(/.*)?)$ fcgi://127.0.0.1:9000/var/www/html/$1
    DirectoryIndex /index.php index.php

    # This is to forward all PHP to php-fpm.
    <FilesMatch \.php$>
    SetHandler "proxy:unix:/path/to/socket.sock|fcgi://kyle-drupal-demo.openshift.dhslabs.com/"
    </FilesMatch>

 # Set some proxy properties (the string "unique-domain-name-string" should match
 # the one set in the FilesMatch directive.
    <Proxy fcgi://kyle-drupal-demo.openshift.dhslabs.com>
    ProxySet connectiontimeout=5 timeout=240
    </Proxy>

 # If the php file doesn't exist, disable the proxy handler.
 # This will allow .htaccess rewrite rules to work and
 # the client will see the default 404 page of Apache
    RewriteCond %{REQUEST_FILENAME} \.php$
    RewriteCond %{DOCUMENT_ROOT}/%{REQUEST_URI} !-f
    RewriteRule (.*) - [H=text/html]


</VirtualHost>

<VirtualHost *:8080>
    DocumentRoot /var/www/html/docroot
    ServerName {{ edit_url }}
    ServerAlias {{ edit_alias }}
    ErrorLog logs/{{ edit_url}}.gov-error_log
    CustomLog logs/{{ edit_url }}.gov-access_log common
    php_value newrelic.appname "{{ site_url }};PHP Application"
    ProxyPassMatch ^/(.*\.php(/.*)?)$ fcgi://127.0.0.1:9000/var/www/html/$1
    DirectoryIndex /index.php index.php
    # This is to forward all PHP to php-fpm.
    <FilesMatch \.php$>
    SetHandler "proxy:unix:/path/to/socket.sock|fcgi://kyle-drupal-demo.openshift.dhslabs.com/"
    </FilesMatch>

 # Set some proxy properties (the string "unique-domain-name-string" should match
 # the one set in the FilesMatch directive.
    <Proxy fcgi://kyle-drupal-demo.openshift.dhslabs.com>
    ProxySet connectiontimeout=5 timeout=240
    </Proxy>

 # If the php file doesn't exist, disable the proxy handler.
 # This will allow .htaccess rewrite rules to work and 
 # the client will see the default 404 page of Apache
    RewriteCond %{REQUEST_FILENAME} \.php$
    RewriteCond %{DOCUMENT_ROOT}/%{REQUEST_URI} !-f
    RewriteRule (.*) - [H=text/html]

</VirtualHost>
